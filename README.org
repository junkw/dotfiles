# -*- mode: org; coding: utf-8; indent-tabs-mode: nil -*-

* My dotfiles

** Requirements

   - macOS Monterey
   - Xcode
   - Zsh
     - [[https://github.com/zplug/zplug][zplug]]
   - [[https://brew.sh][Homebrew]]

** Installation

#+begin_src sh
git clone https://github.com/junkw/dotfiles.git /path/to/local/repo
cd /path/to/local/repo
rake

/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
brew doctor
brew tap Homebrew/bundle
brew bundle -v
brew link --force texinfo
fc-cache -vf

GMAIL=xxxx@gmail.com rake after
mu init --muhome=$XDG_CACHE_HOME/mu/ --maildir=$XDG_DATA_HOME/mail/ --my-address=$GMAIL

export SHELL=/usr/local/bin/zsh
echo $SHELL | sudo tee -a /etc/shells
chsh -s $SHELL
exec $SHELL -l
#+end_src

*** BasicTeX

#+begin_src sh
sudo tlmgr update --self --all
sudo tlmgr install collection-langjapanese collection-luatex collection-latexextra
sudo tlmgr paper a4
#+end_src

*** [[https://github.com/hokaccha/nodebrew][Nodebrew]]

#+begin_src sh
curl -L git.io/nodebrew | perl - setup
nodebrew install-binary stable
nodebrew use stable && exec $SHELL -l

npm install -g csslint
npm install -g jshint
npm install -g tern
npm install -g vmd

npm install -g textlint
npm install -g textlint-plugin-html
npm install -g textlint-plugin-org
npm install -g traverse
npm install -g textlint-filter-rule-comments
npm install -g textlint-filter-rule-allowlist
npm install -g textlint-rule-preset-ja-technical-writing
npm install -g textlint-rule-preset-ja-spacing
npm install -g textlint-rule-ja-no-orthographic-variants
npm install -g @textlint-ja/textlint-rule-no-dropping-i
npm install -g textlint-rule-prefer-tari-tari
npm install -g textlint-rule-ginger
#+end_src

*** [[http://phpbrew.github.io/phpbrew/][PHPBrew]]

#+begin_src sh
curl -L -O https://github.com/phpbrew/phpbrew/releases/latest/download/phpbrew.phar
chmod +x phpbrew.phar
sudo mv phpbrew.phar /usr/local/bin/phpbrew

mkdir -p ~/opt/phpbrew
phpbrew init --root=~/opt/phpbrew
phpbrew lookup-prefix homebrew

phpbrew update
phpbrew install php-7.4 +small +openssl=$(brew --prefix openssl@1.1)/bin/openssl -posix +iconv +ctype +fileinfo +hash +zip
phpbrew ext install ast latest
phpbrew ext install pcntl latest

mkdir ~/opt/composer/
cd ~/opt/composer/
composer require --dev "phan/phan:5.x"
composer require --dev "phpstan/phpstan"
#+end_src

*** QuickLook

#+begin_src sh
defaults write org.n8gray.QLColorCode textEncoding UTF-8
defaults write org.n8gray.QLColorCode font RictyDiminishedDiscord-Reqular
defaults write org.n8gray.QLColorCode fontSizePoints 10
defaults write org.n8gray.QLColorCode extraHLFlags '-l'
qlmanage -r cache
qlmanage -r
#+end_src
