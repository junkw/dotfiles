#
## General
#

use-filedir-conf=yes
stop-screensaver
cursor-autohide-fs-only
cursor-autohide=1000
pause
keep-open=yes
cache=auto
force-seekable=yes
autofit-larger=100%x95%
osd-bar=no
osd-duration=3000
osd-border-size=1
osd-scale-by-window=no
osd-font-size=30
osd-font='Hiragino Kaku Gothic Pro W3'
sub-font='Hiragino Kaku Gothic Pro W3'
screenshot-template=~/Desktop/mpv-screenshot-%03n


#
## Audio
#

softvol=yes
softvol-max=200
volume=100


#
## Video
#

correct-pts=yes

# SEE https://freetime.mikeconnelly.com/archives/5371
vo=gpu
hwdec=videotoolbox                     # Enable hardware decoding
hls-bitrate=max                        # Use max quality for HLS streams
dither-depth=auto                      # Enable dithering
target-prim=bt.2020                    # Target Rec.2020 (wide color gamut)
no-hidpi-window-scale                  # Used on 5K iMac to prevent OSX scaling
icc-profile-auto

# Upscaling
# Chroma subsampling means that chroma information is encoded at lower resolution than luma
# In MPV, chroma is upscaled to luma resolution (video size) and then the converted RGB is upscaled to target resolution (screen size)
scale=ewa_lanczossharp                 # Luma upscale
dscale=sinc                            # Luma downscale
cscale=ewa_lanczossharp                # Chroma upscale

# Debanding
deband=yes
deband-iterations=1                    # Deband steps (More = Better quality, but higher GPU cost)
deband-threshold=70                    # Deband strength (More = Less banding, but more detail loss)
deband-range=16                        # Deband range (More = Less banding, but higher GPU cost)
deband-grain=5                         # Dynamic Grain (More = More dynamic grain)

# Interpolation
interpolation=yes                      # Enables motion interpolation
video-sync=display-resample            # Required if you enable interpolation
tscale=oversample                      # Interpolation
temporal-dither


#
## Profiles
#

[uhd]
# 7680x4320 (UHDTV)
# 3840x2160 (UHDTV)
profile-desc=cond:get('width', -math.huge) >= 3840
vd-lavc-threads=32

[full-hd]
# 1920x1080 (HDTV, Blu-ray)
profile-desc=cond:get('width', -math.huge) == 1920
geometry=3840x2160                     # Force 4k resolution output
# Video doubled by RAVU (1080 -> 2160); no additional up/downscaling
glsl-shaders="~~/shaders/gather/ravu-r4-yuv.hook"

[hd]
# 1280x720 (HDTV, Blu-ray)
profile-desc=cond:get('width', -math.huge) == 1280
geometry=3840x2160                     # Force 4k resolution output
# Video tripled by RAVU (720 -> 2160); no additional up/downscaling
glsl-shaders="~~/shaders/compute/ravu-3x-r4-yuv.hook"

[sdtv-ntsc]
# 640x480 (NTSC Broadcast)
# 704x480 (NTSC Broadcast)
# 720x480 (NTSC DVD)
profile-desc=cond:get('height', -math.huge) == 480
deinterlace=yes
geometry=1920x1080                     # Force Full-HD resolution output
# Video sextupled by RAVU (480 -> 2880); then downscaled (2880 -> 2160)
glsl-shaders="~~/shaders/compute/ravu-3x-r4-yuv.hook"
glsl-shaders-append="~~/shaders/gather/ravu-r4-yuv.hook"
deband=no
# Anti-Ringing
scale-antiring=0.7                     # Luma upscale deringing (Higher = Less ringing, but more detail loss)
dscale-antiring=0.7                    # Luma downscale deringing (Higher = Less ringing, but more detail loss)
cscale-antiring=0.7                    # Chroma upscale deringing (Higher = Less ringing, but more detail loss)

[sdtv-pal]
# 352x576 (PAL Broadcast)
# 480x576 (PAL Broadcast)
# 544x576 (PAL Broadcast)
# 720x576 (PAL Broadcast or DVD)
profile-desc=cond:get('height', -math.huge) == 576
deinterlace=yes
geometry=1920x1080                     # Force Full-HD resolution output
deband=no
# Video quadrupled by RAVU (576 -> 2304); then downscaled (2304 -> 2160)
glsl-shaders="~~/shaders/gather/ravu-r4-yuv.hook"
glsl-shaders-append="~~/shaders/gather/ravu-r4-yuv.hook"
# Anti-Ringing
scale-antiring=0.7                     # Luma upscale deringing (Higher = Less ringing, but more detail loss)
dscale-antiring=0.7                    # Luma downscale deringing (Higher = Less ringing, but more detail loss)
cscale-antiring=0.7                    # Chroma upscale deringing (Higher = Less ringing, but more detail loss)
